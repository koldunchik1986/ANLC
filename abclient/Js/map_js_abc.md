# Анализ map.js.abc

**Расположение:** `abclient/Js/map.js.abc`

**Назначение:**
Этот JavaScript-файл, по всей видимости, является более старой или альтернативной версией файла `map.js`. Он реализует базовую функциональность отображения карты и перемещения по ней, но без расширенных взаимодействий с C#-приложением через `window.external`.

**Ключевые особенности:**

*   **Базовая карта:** Отображает карту с фиксированными размерами (`width = 3`, `height = 1`).
*   **Перемещение:** Содержит логику для перемещения по карте (`move()`, `loadPath()`, `moveMapTo()`).
*   **Таймеры:** Управляет таймерами для отображения времени (`timerst()`).
*   **Курсор и транспорт:** Функции для отображения курсора и транспортных средств (`createCursor()`, `showCursor()`, `showTransport()`).
*   **Обработка событий:** Содержит функции для обработки кликов по кнопкам (`ButClick()`) и обновления состояния (`StateReady()`).

**Взаимодействие с C#:**

В этом файле **не обнаружено прямых вызовов к `window.external`**. Это является ключевым отличием от `map.js`, который активно использует `window.external` для взаимодействия с C#-логикой. Это может указывать на то, что `map.js.abc` использовался на более ранних этапах разработки или для более простой версии клиента, где не требовалась глубокая интеграция с нативным приложением.

**Связь с Android-портом:**

Поскольку этот файл не содержит вызовов к `window.external`, его портирование в Android WebView будет заключаться в простой инъекции JavaScript-кода. Нет необходимости создавать соответствующие `@JavascriptInterface` методы в Kotlin для этого файла. Однако, если этот файл используется в приложении, необходимо убедиться, что все необходимые данные (например, `map` и `mapbt` переменные) доступны для JavaScript.
